webpackJsonp([56],{423:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(60),u=a(n),o=r(7),s=a(o),c=r(168),d=a(c),i=r(175),f=a(i);r(169);var l=r(94),p=(r(556),r(783),r(106)),h=a(p),y=r(170),v=a(y),m=r(824);t.default={namespace:"orgLayout",state:{loading:!1,selectedTab:"home",userAllRole:[],userNowRole:{},userInfo:{}},subscriptions:{setup:function(e){var t=e.dispatch;e.history.listen(function(e){var r=e.pathname,a=(0,h.default)("/org/:tab?/:code?").exec(r);if(a){var n=(0,f.default)(a,3),u=n[1],o=n[2],s=o||u;s?t({type:"fetch",payload:{MemCode:s}}):console.warn("/org/:tab?/:code? \u4e2d code \u4e3a\u7a7a\uff01")}})}},effects:{fetch:u.default.mark(function e(t,r){var a,n,o,c,i,f,l=t.payload,p=r.call,h=r.put,y=r.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(function(e){return e.orgLayout});case 2:if(a=e.sent,n=a.userAllRole,o=a.userNowRole,c=a.loading,!(0,v.default)(n)&&!(0,v.default)(o)||!1!==c){e.next=29;break}return e.next=9,h({type:"saveLoading",payload:!0});case 9:return d.default.loading("\u6b63\u5728\u66f4\u65b0\u7528\u6237\u4fe1\u606f...",0),e.next=12,p(m.findMemInfo,{code:l.MemCode});case 12:if(i=e.sent,f=i.data,d.default.hide(),200!=f.code){e.next=26;break}if(!(0,v.default)(f.ret)){e.next=20;break}console.warn("\u7cfb\u7edf\u6682\u65e0\u60a8\u7684\u4e2a\u4eba\u8d44\u6599! \u8bf7\u5230\u91cd\u5e86\u5e0212371\u515a\u5efa\u5e73\u53f0\u7528\u6237\u7ba1\u7406\u5173\u8054\u515a\u5458"),e.next=24;break;case 20:return e.next=22,h({type:"success",payload:{userAllRole:f.ret,userNowRole:(0,s.default)({},f.ret[0],{orgZbCode:f.ret[0].org_zb_code,sourceOrgCode:f.ret[0].OrgCode,sourceOrgName:f.ret[0].OrgName,sourceOrgZbCode:f.ret[0].org_zb_code})}});case 22:return e.next=24,h({type:"login/reload",payload:{code:l.MemCode,role:"org"}});case 24:e.next=27;break;case 26:d.default.info("\u7cfb\u7edf\u6682\u65e0\u60a8\u7684\u4e2a\u4eba\u8d44\u6599",5);case 27:return e.next=29,h({type:"saveLoading",payload:!1});case 29:case"end":return e.stop()}},e,this)}),changeNowRole:u.default.mark(function e(t,r){var a,n=t.payload,o=void 0===n?{}:n,c=(r.call,r.put),d=r.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(function(e){return e.orgLayout});case 2:return a=e.sent,e.next=5,c({type:"success",payload:{userNowRole:(0,s.default)({},a.userNowRole,o,{orgZbCode:o.org_zb_code,sourceOrgCode:o.OrgCode,sourceOrgName:o.OrgName,sourceOrgZbCode:o.org_zb_code})}});case 5:case"end":return e.stop()}},e,this)}),changeNowDepartment:u.default.mark(function e(t,r){var a,n=t.payload,o=void 0===n?{}:n,c=(r.call,r.put),d=r.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(function(e){return e.orgLayout});case 2:return a=e.sent,e.next=5,c({type:"success",payload:{userNowRole:(0,s.default)({},a.userNowRole,o)}});case 5:case"end":return e.stop()}},e,this)}),saveUserNowRole:u.default.mark(function e(t,r){var a,n,o=t.payload,c=(r.call,r.put),d=r.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(function(e){return e.orgLayout});case 2:if(a=e.sent,n=a.userNowRole,(0,v.default)(o.path)){e.next=11;break}return e.next=7,c({type:"saveRole",payload:{userNowRole:(0,s.default)({},n,{OrgCode:o.item.Code,OrgName:o.item.Name,TypeCode:o.item.TypeCode})}});case 7:return e.next=9,c(l.routerRedux.push({pathname:o.path}));case 9:e.next=13;break;case 11:return e.next=13,c({type:"saveRole",payload:{userNowRole:o.userNowRole}});case 13:case"end":return e.stop()}},e,this)}),saveSelectedTab:u.default.mark(function e(t,r){var a=t.payload,n=(r.call,r.put);r.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({type:"success",payload:{selectedTab:a.selectedTab}});case 2:case"end":return e.stop()}},e,this)}),savechangeUserNowRole:u.default.mark(function e(t,r){var a=t.payload,n=(r.call,r.put);r.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({type:"success",payload:{userNowRole:a.userNowRole}});case 2:case"end":return e.stop()}},e,this)})},reducers:{success:function(e,t){return(0,s.default)({},e,t.payload)},saveRole:function(e,t){return(0,s.default)({},e,{userNowRole:t.payload.userNowRole})},saveLoading:function(e,t){return(0,s.default)({},e,{loading:t.payload})}}},e.exports=t.default},556:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCardData=t.components=t.source=t.update=t.deleted=t.insert=void 0;var n=r(60),u=a(n),o=r(97),s=a(o),c=r(96),d=a(c),i=(t.insert=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/common/insert",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.deleted=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/common/delete",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.update=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/common/update",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.source=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/common/select",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.components=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/common/components",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.getCardData=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/service/statistics/lookCostInOrg",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r(167)),f=a(i)},783:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getUrlParams=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(t);return null!=r?unescape(r[2]):null},t.startWith=function(e,t){return new RegExp("^"+t).test(e)},t.getEchartsFontSize=function(){var e=window.devicePixelRatio||1;return 1==e?12:2==e?24:36}},824:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteac=t.hasZWH=t.activityList=t.selectOrgGroup=t.selectOrgGroupMem=t.activityDetails=t.selectUserInfo=t.findMemInfo=t.update=t.add=void 0;var n=r(60),u=a(n),o=r(97),s=a(o),c=r(96),d=a(c),i=(t.add=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/activity/add",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.update=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/activity/update",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.findMemInfo=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/mem/selectMemInfo",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.selectUserInfo=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/mem/selectUserInfo",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.activityDetails=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/activity/activityDetails",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.selectOrgGroupMem=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/mem/selectOrgGroupMem",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.selectOrgGroup=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/org/selectOrgGroup",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.activityList=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/activity/activityList",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.hasZWH=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/activity/typeVerification",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.deleteac=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/api/activity/updateState",{method:"post",body:(0,s.default)(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r(167)),f=a(i)}});